<main>
    <div class="container py-3">
        <div class="row">
            <div class="col-md-6 col-lg-4 mx-auto">
                <div class="card card-body">
                    <form (ngSubmit)='onRegisterSubmit()' #registerForm=ngForm>
                        <div class="form-group has-error">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
                                <input required minLength="3" class="form-control input-lg" #firstNameInput=ngModel [(ngModel)]="user.firstName" placeholder="First name" name="firstName" type="text">
                            </div>
                            <label class="validation-feedback" *ngIf="(firstNameInput.errors && (firstNameInput.dirty || firstNameInput.touched)) || firstNameInput.errors && mouseover">
                                <span *ngIf="firstNameInput.errors.required">First Name is required</span>
                            </label>
                        </div>
                        <div class="form-group has-error">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-user fa" aria-hidden="true"></i></span>
                                <input required minlength="3" class="form-control input-lg" #lastNameInput=ngModel [(ngModel)]="user.lastName" placeholder="Last name" name="lastName" type="text">
                            </div>
                            <label class="validation-feedback" *ngIf="(lastNameInput.errors && (lastNameInput.dirty || lastNameInput.touched)) || lastNameInput.errors && mouseover">
                                <span *ngIf="lastNameInput.errors.required">Last Name is required</span>
                            </label>
                        </div>
                        <div class="form-group has-error">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-users fa" aria-hidden="true"></i></span>
                                <input required minlength="4" class="form-control input-lg" #usernameInput=ngModel [(ngModel)]="user.username" placeholder="Username" name="username" type="text">
                            </div>
                            <label class="validation-feedback" *ngIf="(usernameInput.errors && (usernameInput.dirty || usernameInput.touched)) || usernameInput.errors && mouseover">
                                <span *ngIf="usernameInput.errors.required">Username is required</span>
                                <span *ngIf="usernameInput.errors.minlength">Username must be at least 4 characters </span>
                            </label>
                        </div>
                        <div class="form-group has-success">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-envelope" aria-hidden="true"></i></span>
                                <input required class="form-control input-lg" #emailInput=ngModel [(ngModel)]="user.email" placeholder="Email" name="email" value="" type="email">
                            </div>
                            <label class="validation-feedback" *ngIf="(emailInput.errors && (emailInput.dirty || emailInput.touched)) || emailInput.errors && mouseover">
                                <span *ngIf="emailInput.errors.required">Email is required</span>
                            </label>
                        </div>
                        <div class="form-group has-success">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-lock fa-lg" aria-hidden="true"></i></span>
                                <input #passwordInput=ngModel class="form-control input-lg" [(ngModel)]="user.password" placeholder="Password" name="password" type="password" required minlength="8" pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{5,}$">
                            </div>
                            <label class="validation-feedback" *ngIf="(passwordInput.errors && (passwordInput.dirty || passwordInput.touched)) || passwordInput.errors && mouseover">
                                    <span *ngIf="passwordInput.errors.required">Password is required</span>
                                    <span *ngIf="passwordInput.errors.minlength">Password must be 8 characters long, we need another {{passwordInput.errors.minlength.requiredLength - passwordInput.errors.minlength.actualLength}} characters </span>
                                    <span *ngIf="passwordInput.errors.pattern">Password must contain at least one uppercase letter and at least one number.</span>
                            </label>
                        </div>
                        <div class="form-group has-success">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-lock fa-lg" aria-hidden="true"></i></span>
                                <input #passwordConfirmInput required class="form-control input-lg" placeholder="Confirm Password" name="password_confirm" value="" type="password">
                            </div>
                            <label class="validation-feedback" *ngIf="passwordInput.value != passwordConfirmInput.value">
                                    <span *ngIf="passwordInput.value != passwordConfirmInput.value">Passwords do not match.</span>
                            </label>
                        </div>
                        <div class="checkbox">
                            <label class="small">
                                <input name="terms" type="checkbox">I have read and agreed to the <a href="/#">terms of service</a>
                            </label>
                        </div>
                        <input class="btn btn-lg btn-primary btn-block" [disabled]="!registerForm.valid" value="Sign Me Up" type="submit">
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>